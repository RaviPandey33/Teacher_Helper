{% extends 'layout.html' %}
{% block content %}
<div class="container mt-5" style="max-width: 700px;">
  <h3>Edit Student Information</h3>
  {% for field, errors in form.errors.items() %}
    {% for error in errors %}
      <div class="alert alert-danger">
        <strong>{{ field }}:</strong> {{ error }}
      </div>
    {% endfor %}
  {% endfor %}

  <form method="POST" action="{{ url_for('admin.edit_student', student_id=student.id) }}">
    {{ form.hidden_tag() }}

    <!-- Name -->
    <div class="mb-3">
      {{ form.name.label(class="form-label") }}
      {{ form.name(class="form-control") }}
    </div>

    <!-- Residing Country & Gender -->
    <div class="row">
      <div class="col-md-6 mb-3">
        {{ form.residing_country.label(class="form-label") }}
        {{ form.residing_country(class="form-select") }}
      </div>
      <div class="col-md-6 mb-3">
        {{ form.gender.label(class="form-label") }}
        {{ form.gender(class="form-select") }}
      </div>
    </div>

    <!-- Student Email -->
    <div class="mb-3">
      {{ form.email.label(class="form-label") }}
      {{ form.email(class="form-control") }}
    </div>

    <!-- Student Phone -->
    <div class="row">
      <div class="col-md-4 mb-3">
        {{ form.student_country_code.label(class="form-label") }}
        {{ form.student_country_code(class="form-select") }}
      </div>
      <div class="col-md-8 mb-3">
        {{ form.phone.label(class="form-label") }}
        {{ form.phone(class="form-control") }}
      </div>
    </div>

    <!-- Zoom Meeting Info -->
    <hr>
    <h5>Zoom Meeting</h5>
    <div class="mb-3">
      {{ form.zoom_link.label(class="form-label") }}
      {{ form.zoom_link(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.zoom_password.label(class="form-label") }}
      {{ form.zoom_password(class="form-control") }}
    </div>

    <hr>
    <!-- Parent Name -->
    <div class="mb-3">
      {{ form.parent_name.label(class="form-label") }}
      {{ form.parent_name(class="form-control") }}
    </div>

    <!-- Parent Email -->
    <div class="mb-3">
      {{ form.parent_email.label(class="form-label") }}
      {{ form.parent_email(class="form-control") }}
    </div>

    <!-- Parent Phone -->
    <div class="row">
      <div class="col-md-4 mb-3">
        {{ form.parent_country_code.label(class="form-label") }}
        {{ form.parent_country_code(class="form-select") }}
      </div>
      <div class="col-md-8 mb-3">
        {{ form.parent_phone.label(class="form-label") }}
        {{ form.parent_phone(class="form-control") }}
      </div>
    </div>

    <hr>
    <!-- Discord + Sibling -->
    <div class="row">
      <div class="col-md-6 mb-3">
        {{ form.discord_id.label(class="form-label") }}
        {{ form.discord_id(class="form-control") }}
      </div>
      <div class="col-md-6 mb-3">
        {{ form.sibling_reference.label(class="form-label") }}
        {{ form.sibling_reference(class="form-control") }}
      </div>
    </div>

    <!-- Subject -->
    <div class="mb-3">
      {{ form.learning_subject.label(class="form-label") }}
      {{ form.learning_subject(class="form-control") }}
    </div>

    <!-- Fee -->
    <div class="mb-3">
      {{ form.fee_per_month.label(class="form-label") }}
      {{ form.fee_per_month(class="form-control") }}
    </div>

    <!-- Notes -->
    <div class="mb-3">
      {{ form.notes.label(class="form-label") }}
      {{ form.notes(class="form-control", rows=3) }}
    </div>

    <!-- Class Details -->
    <hr>
    <h5>Class Details</h5>
    <div class="row">
      <div class="col-md-6 mb-3">
        {{ form.classes_per_week.label(class="form-label") }}
        {{ form.classes_per_week(class="form-select") }}
      </div>
      <div class="col-md-6 mb-3">
        {{ form.timezone.label(class="form-label") }}
        {{ form.timezone(class="form-select") }}
      </div>
    </div>

    {% for class_time in form.class_times %}
      <div class="border rounded p-3 mb-2">
        <label><strong>Class Time</strong></label>
        <div class="row">
          <div class="col-md-5 mb-2">
            {{ class_time.day.label(class="form-label") }}
            {{ class_time.day(class="form-control") }}
          </div>
          <div class="col-md-2 mb-2">
            {{ class_time.hour.label(class="form-label") }}
            {{ class_time.hour(class="form-select") }}
          </div>
          <div class="col-md-2 mb-2">
            {{ class_time.minute.label(class="form-label") }}
            {{ class_time.minute(class="form-select") }}
          </div>
          <div class="col-md-3 mb-2">
            {{ class_time.am_pm.label(class="form-label") }}
            {{ class_time.am_pm(class="form-select") }}
          </div>
        </div>
      </div>
    {% endfor %}

    <!-- Student Profile -->
    <hr>
    <h5>Student Profile</h5>
    <div class="mb-3">
      {{ form.date_of_birth.label(class="form-label") }}
      {{ form.date_of_birth(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.grade.label(class="form-label") }}
      {{ form.grade(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.school_name.label(class="form-label") }}
      {{ form.school_name(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.hobbies.label(class="form-label") }}
      {{ form.hobbies(class="form-control", rows=2) }}
    </div>
    <div class="mb-3">
      {{ form.start_date.label(class="form-label") }}
      {{ form.start_date(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.end_date.label(class="form-label") }}
      {{ form.end_date(class="form-control") }}
    </div>

    <!-- Future Academic Tracking -->
    <hr>
    <h5>Future Academic Tracking</h5>
    <div class="mb-3">
      {{ form.future_college.label(class="form-label") }}
      {{ form.future_college(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.future_stream.label(class="form-label") }}
      {{ form.future_stream(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.career_interest.label(class="form-label") }}
      {{ form.career_interest(class="form-control", rows=2) }}
    </div>

    <!-- Submit -->
    <button type="submit" class="btn btn-success">Update</button>
  </form>
</div>
{% endblock %}
